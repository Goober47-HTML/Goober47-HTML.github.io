<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <title>WEBSITE!!</title>
</head>
<body>

<h1>HELLO!</h1>

<p style="font-family: 'Comic Sans MS'">i am bulborb</p>
<p style="font-family: 'Comic Sans MS'">|</p>
<p style="font-family: 'Comic Sans MS'">\/</p>

<model-viewer id="bulborb"
              src="model.glb"
              alt="Bulborb"
              camera-controls
              auto-rotate
              shadow-intensity="1"
              style="width: 600px; height: 400px;">
</model-viewer>

<!-- Animation Buttons -->
<button onclick="playAnimation('Walk')">Walk</button>
<button onclick="playAnimation('Idle')">Idle</button>

<script>
  const modelViewer = document.getElementById('bulborb');

  function playAnimation(name) {
    modelViewer.animationName = name;
    modelViewer.play();
  }

  modelViewer.addEventListener('load', () => {
    // Start idle animation
    playAnimation('Idle');

    const root = modelViewer.model.scene; // correct root

    // Recursively search for a node by name
    function findNode(node, name) {
      if (node.name === name) return node;
      if (!node.children) return null;
      for (const child of node.children) {
        const result = findNode(child, name);
        if (result) return result;
      }
      return null;
    }

    // Find the eye bones
    const leftEye = findNode(root, 'leye');
    const rightEye = findNode(root, 'reye');

    console.log("Left eye:", leftEye);
    console.log("Right eye:", rightEye);

    if (!leftEye || !rightEye) {
      console.warn("Could not find eye bones â€” but they ARE in the file.");
      return;
    }

    // Mouse tracking
    window.addEventListener('mousemove', (event) => {
      const x = (event.clientX / window.innerWidth) * 2 - 1;
      const y = (event.clientY / window.innerHeight) * 2 - 1;

      leftEye.rotation.y = x * 0.5;
      leftEye.rotation.x = -y * 0.5;

      rightEye.rotation.y = x * 0.5;
      rightEye.rotation.x = -y * 0.5;
    });
  });
</script>

<a href="models.html">
  <button>Go Back</button>
</a>

</body>
</html>
